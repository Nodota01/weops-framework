(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1Etd":function(e,t,n){"use strict";n.r(t);var i,r=n("G0B5"),o=n("NjKV"),a=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visible=!1,t.loading=!1,t.roleInfo="",t.type="",t.formData={group_name:"",id:""},t.rules={group_name:[{required:!0,message:"必填项",trigger:"blur"}]},t}return a(t,e),Object.defineProperty(t.prototype,"title",{get:function(){return"add"===this.type?"新增组织":"edit"===this.type?"编辑组织":"添加子组"},enumerable:!1,configurable:!0}),t.prototype.show=function(e,t){this.visible=!0,this.type=e,this.formData.group_name="","addSub"===e&&(this.formData.id=t.id),["edit"].includes(this.type)&&(this.roleInfo=t,this.formData.group_name=t.name,"edit"===this.type&&(this.formData.id=t.id))},t.prototype.close=function(){this.visible=!1},t.prototype.confirm=function(){var e=this;this.$refs.organizationValidateForm.validate().then((function(t){var n="",i={};["add","addSub"].includes(e.type)?(n="addGroup",i.group_name=e.formData.group_name,"addSub"===e.type&&(i.parent_group_id=e.formData.id)):(n="editGroup",i.id=e.formData.id,i.group_name=e.formData.group_name),e.loading=!0,e.$api.GroupManage[n](i).then((function(t){if(!t.result)return e.$error(t.message),!1;e.$success("".concat(e.title,"成功!")),e.$emit("refreshList"),e.close()})).finally((function(){e.loading=!1})),e.close()}))},t.prototype.closeDialog=function(){this.$refs.organizationValidateForm.clearError()},t=s([r.a],t)}(r.f),c=l,u=n("KHd+"),p=Object(u.a)(c,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("bk-dialog",{attrs:{position:{top:150},theme:"primary",width:"600","mask-close":!1,"header-position":"left",title:e.title},on:{"after-leave":e.closeDialog},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,zIndex:10},expression:"{ isLoading: loading, zIndex: 10 }"}],staticClass:"content-box"},[t("bk-form",{ref:"organizationValidateForm",attrs:{"label-width":90,model:e.formData,rules:e.rules}},[t("bk-form-item",{attrs:{label:"名称",required:"",property:"group_name"}},[t("bk-input",{attrs:{placeholder:"请输入组织名称"},model:{value:e.formData.group_name,callback:function(t){e.$set(e.formData,"group_name",t)},expression:"formData.group_name"}})],1)],1)],1),e._v(" "),t("template",{slot:"footer"},[t("bk-button",{staticClass:"mr10",attrs:{disabled:e.loading,theme:"primary",title:"确认"},on:{click:e.confirm}},[e._v("\n            确认\n        ")]),e._v(" "),t("bk-button",{attrs:{theme:"default",type:"submit",title:"取消"},on:{click:e.close}},[e._v("\n            取消\n        ")])],1)],2)}),[],!1,null,null,null).exports,d=n("7Jkb"),h=n("8lkm"),f=n("wA+L"),m=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(){return v=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)},y=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},b=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},_=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visible=!1,t.loading=!1,t.isConfirm=!1,t.active="role",t.pagination={current:1,count:0,limit:20,small:!0},t.roleColumns=[{type:"selection"},{label:"角色名称",key:"name"},{label:"角色描述",key:"description"}],t.searchValue="",t.rawDataList=[],t.dataList=[],t.selectedData={},t.allSelected=[],t.rawSelected=[],t.credentialsDetail={},t.roleDetail={},t}return m(t,e),Object.defineProperty(t.prototype,"isGroup",{get:function(){return"role"===this.active},enumerable:!1,configurable:!0}),t.prototype.showSlider=function(e,t){return g(this,void 0,void 0,(function(){var n;return b(this,(function(i){return this.visible=!0,this.searchValue="",this.roleDetail=t,n={role:[],group_role:[]},this.selectedData=this.$deepClone(e||n),this.rawSelected=this.$deepClone(this.selectedData.role),this.handleAllSelected(),this.getDataList(),[2]}))}))},t.prototype.handleAllSelected=function(){var e=this;this.allSelected=[],Object.keys(this.selectedData).forEach((function(t){e.allSelected=e.allSelected.concat(e.selectedData[t].map((function(e){return v(v({},e),{type:t})})))}))},t.prototype.getDataList=function(){var e,t;return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c=this;return b(this,(function(u){switch(u.label){case 0:n={page:this.pagination.current,page_size:this.pagination.limit,search:this.searchValue},this.loading=!0,u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.$api.RoleManageMain.getRoleList(n)];case 2:return(i=u.sent()).data.items=i.data.map((function(e){return{id:e.id,name:e.name,description:e.description}})),i.result?(r=Object.fromEntries((this.selectedData[this.active]||[]).map((function(e){return[e.id,e]}))),o="admin_group"===(null===(e=this.roleDetail)||void 0===e?void 0:e.role_name),this.rawDataList=((null===(t=i.data)||void 0===t?void 0:t.items)||[]).map((function(e){return v(v({},e),{isChecked:!o||r[e.id]})})),a=this.pagination,s=a.current,l=a.limit,this.dataList=this.rawDataList.filter((function(e){return e.name.includes(c.searchValue)})),this.pagination.count=this.dataList.length,this.dataList=this.dataList.slice((s-1)*l,s*l),this.$nextTick((function(){c.dataList.forEach((function(e){var t;r[e.id]&&(null===(t=c.$refs.userTable)||void 0===t||t.toggleRowSelection(e,!0))}))})),[3,4]):(this.rawDataList=[],this.pagination.count=0,[2,this.$error(i.message)]);case 3:return this.loading=!1,[7];case 4:return[2]}}))}))},t.prototype.handleConfirm=function(){this.visible=!1,this.setRolesByGroup(this.rawSelected,this.allSelected)},t.prototype.setRolesByGroup=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l;return b(this,(function(c){switch(c.label){case 0:for(n=[],i=e.map((function(e){return e.id})),r=t.map((function(e){return e.id})),a=0;a<i.length;a++)r.includes(i[a])||n.push(i[a]);for(o=[],a=0;a<r.length;a++)i.includes(r[a])||o.push(r[a]);s=[],l=[],o.length>0&&l.push(this.$api.GroupManage.addGroupRoles({id:this.roleDetail.id,addIds:o})),n.length>0&&s.push(this.$api.GroupManage.delGroupRoles({id:this.roleDetail.id,deleteIds:n})),this.isConfirm=!0,c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(_(_([],l,!0),s,!0))];case 2:return c.sent().every((function(e){return e.result}))&&(this.$success("设置人员成功"),this.handleClose(),this.$emit("confirm")),[3,4];case 3:return this.isConfirm=!1,[7];case 4:return[2]}}))}))},t.prototype.handleClose=function(){this.visible=!1},t.prototype.handleSelect=function(e,t){if(e.find((function(e){return e.id===t.id})))this.selectedData[this.active].push(t);else{var n=this.selectedData[this.active].findIndex((function(e){return e.id===t.id}));this.selectedData[this.active].splice(n,1)}this.handleAllSelected()},t.prototype.handleAllSelect=function(e){var t=this,n=!!e.length;this.dataList.forEach((function(e){if(n){!t.selectedData[t.active].find((function(t){return t.id===e.id}))&&t.selectedData[t.active].push(e)}else{var i=t.selectedData[t.active].findIndex((function(t){return t.id===e.id}));t.selectedData[t.active].splice(i,1)}})),this.handleAllSelected()},t.prototype.handlePageChange=function(e){this.pagination.current=e;var t=this.pagination.limit;this.dataList=this.dataList.slice((e-1)*t,e*t)},t.prototype.handleLimitChange=function(e){this.pagination.current=1,this.pagination.limit=e,this.dataList=this.rawDataList.slice(0,e)},t.prototype.handleSearch=function(){this.pagination.current=1,this.getDataList()},t.prototype.handleRemove=function(e){var t=this,n=this.allSelected.findIndex((function(t){return t.id===e.id&&t.type===e.type}));(n||0===n)&&this.allSelected.splice(n,1),this.$nextTick((function(){t.dataList.forEach((function(n){var i;n.id===e.id&&(null===(i=t.$refs.userTable)||void 0===i||i.toggleRowSelection(n,!1))}))}));var i=this.selectedData[e.type].findIndex((function(t){return t.id===e.id}));this.selectedData[e.type].splice(i,1)},t.prototype.handleClear=function(){var e=this;this.selectedData={role:[],group_role:[]},this.handleAllSelected(),this.$nextTick((function(){e.dataList.forEach((function(t){var n;null===(n=e.$refs.userTable)||void 0===n||n.toggleRowSelection(t,!1)}))}))},y([Object(r.e)({type:String,default:function(){return"白名单"}})],t.prototype,"title",void 0),t=y([Object(r.a)({components:{MenuTab:h.a,ComTable:f.a}})],t)}(r.f),k=w,S=Object(u.a)(k,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("bk-sideslider",{attrs:{width:850,"quick-close":!0,"before-close":e.handleClose,"is-show":e.visible,"ext-cls":"common-dialog-wrapper"},on:{"update:isShow":function(t){e.visible=t},"update:is-show":function(t){e.visible=t}}},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),t("div",{staticClass:"common-dialog-wrapper-main",attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"auth-white-list"},[t("div",{staticClass:"list-container"},[t("div",{staticClass:"header"},[t("bk-input",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"请输入关键字搜索","right-icon":"bk-icon icon-search"},on:{clear:e.handleSearch,"right-icon-click":e.handleSearch,enter:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),t("com-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,zIndex:10},expression:"{ isLoading: loading, zIndex: 10 }"}],ref:"userTable",staticClass:"mt20 table-container",attrs:{data:e.dataList,pagination:e.pagination,columns:e.roleColumns},on:{select:e.handleSelect,"select-all":e.handleAllSelect,"page-change":e.handlePageChange,"page-limit-change":e.handleLimitChange}})],1),e._v(" "),t("div",{staticClass:"selection-container"},[t("p",[e._v("已选择（共"),t("span",[e._v(e._s(e.allSelected.length))]),e._v("条）"),t("span",{staticClass:"clear",on:{click:e.handleClear}},[e._v("清空")])]),e._v(" "),t("ul",e._l(e.allSelected,(function(n){return t("li",{key:n.id+n.type},[e._v("\n                        "+e._s(n.name)+"\n                        "),t("span",[e._v(e._s("role"===n.type?"角色":"组织角色"))]),e._v(" "),t("bk-icon",{attrs:{type:"close"},on:{click:function(t){return e.handleRemove(n)}}})],1)})),0)])])]),e._v(" "),t("template",{slot:"footer"},[t("bk-button",{staticClass:"mr10",attrs:{title:"确认",theme:"primary",loading:e.isConfirm},on:{click:function(t){return e.handleConfirm()}}},[e._v("\n            确认\n        ")]),e._v(" "),t("bk-button",{attrs:{type:"submit",theme:"default",title:"取消",disabled:e.isConfirm},on:{click:function(t){return e.handleClose()}}},[e._v("\n            取消\n        ")])],1)],2)}),[],!1,null,"4c45f4e4",null).exports,x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},G=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},D=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.search="",t.nodeData=[],t.loading=!1,t.checkedIds=[],t}return x(t,e),Object.defineProperty(t.prototype,"user",{get:function(){return this.$store.state.permission.user},enumerable:!1,configurable:!0}),t.prototype.mounted=function(){this.getGroups()},t.prototype.operateGroup=function(e,t){if(!this.$BtnPermission({id:this.$route.name,type:"edit"===e?"SysGroup_edit":"SysGroup_create"}))return!1;this.$refs.operateGroup.show(e,t)},t.prototype.handlerIconClick=function(){this.getGroups()},t.prototype.getGroups=function(){return G(this,void 0,void 0,(function(){var e,t;return D(this,(function(n){switch(n.label){case 0:return this.loading=!0,e={search:this.search},[4,this.$api.GroupManage.getGroups(e)];case 1:return(t=n.sent()).result?(this.nodeData=t.data,this.loading=!1,[2]):[2,!1]}}))}))},t.prototype.deleteNode=function(e){var t=this;if(!this.$BtnPermission({id:this.$route.name,type:"SysGroup_delete"}))return!1;this.$bkInfo({title:"确认要删除该组织？",confirmLoading:!0,confirmFn:function(){return G(t,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:return[4,this.confirmDelete(e)];case 1:return t.sent(),[2]}}))}))}})},t.prototype.deleteNodes=function(){var e=this;if(!this.$BtnPermission({id:this.$route.name,type:"SysGroup_delete"}))return!1;this.$bkInfo({title:"确认要删除选中组织？",confirmLoading:!0,confirmFn:function(){return G(e,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return[4,this.confirmDelete()];case 1:return e.sent(),[2]}}))}))}})},t.prototype.confirmDelete=function(e){return G(this,void 0,void 0,(function(){var t;return D(this,(function(n){switch(n.label){case 0:return t=e?[e.id]:this.checkedIds,[4,this.$api.GroupManage.delGroup({deleteIds:t})];case 1:return n.sent().result?(this.$success("删除成功"),this.getGroups()):this.$error("删除失败"),[2]}}))}))},t.prototype.refreshList=function(){this.getGroups()},t.prototype.personnelManage=function(e){return G(this,void 0,void 0,(function(){var t;return D(this,(function(n){switch(n.label){case 0:return this.$BtnPermission({id:this.$route.name,type:"SysGroup_user"})?[4,this.$api.GroupManage.getGroupUsers({id:e.id,page:1,per_page:20})]:[2,!1];case 1:return(t=n.sent()).data=t.data.map((function(e){return{id:e.id,bk_username:e.username,chname:e.lastName}})),this.$refs.authWhiteList.showSlider({user:t.data},e),[2]}}))}))},t.prototype.roleManage=function(e){return G(this,void 0,void 0,(function(){var t;return D(this,(function(n){switch(n.label){case 0:return this.$BtnPermission({id:this.$route.name,type:"SysGroup_role"})?[4,this.$api.GroupManage.getGroupRoles({id:e.id})]:[2,!1];case 1:return t=n.sent(),this.$refs.roleManage.showSlider({group_role:t.data},e),[2]}}))}))},t.prototype.handleCheck=function(e){this.checkedIds=e},t=$([Object(r.a)({name:"group-manage",components:{PageExplanation:o.a,OperateGroup:p,AuthWhiteList:d.a,RoleManage:S}})],t)}(r.f),L=C,O=Object(u.a)(L,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sys-organization"},[t("page-explanation",{attrs:{title:"组织管理",content:"您可以创建组织，用于管理一组用户，或者进行角色授权，您可以创建、修改和删除组织，并管理其下级单位。"}}),e._v(" "),t("div",{staticClass:"organization-manage"},[t("div",{staticClass:"operate-box"},[t("div",[t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_create"},expression:"{\n                        id: $route.name,\n                        type: 'SysGroup_create'\n                    }"}],staticClass:"mr10",attrs:{theme:"primary",title:"新增组织"},on:{click:function(t){return e.operateGroup("add")}}},[e._v("\n                    新增组织\n                ")]),e._v(" "),t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_delete"},expression:"{\n                        id: $route.name,\n                        type: 'SysGroup_delete'\n                    }"}],staticClass:"mr10",attrs:{theme:"default",title:"批量删除"},on:{click:e.deleteNodes}},[e._v("\n                    批量删除\n                ")])],1),e._v(" "),t("bk-input",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"请输入搜索关键字","right-icon":"bk-icon icon-search"},on:{"right-icon-click":e.handlerIconClick,enter:e.handlerIconClick,clear:e.handlerIconClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,zIndex:10},expression:"{ isLoading: loading, zIndex: 10 }"}],staticClass:"tree-box"},[t("bk-big-tree",{ref:"tree",attrs:{"enable-title-tip":"","default-expand-all":"",selectable:!0,"show-checkbox":!0,options:{childrenKey:"subGroups"},data:e.nodeData},on:{"check-change":e.handleCheck},scopedSlots:e._u([{key:"default",fn:function({node:n,data:i}){return t("div",{},[t("div",{staticClass:"node-box"},[t("span",[e._v(e._s(i.name))]),e._v(" "),t("div",{staticClass:"operate-node"},[t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_create"},expression:"{\n                                    id: $route.name,\n                                    type: 'SysGroup_create'\n                                }"}],attrs:{size:"small",text:"",title:"primary"},on:{click:function(t){return t.stopPropagation(),e.operateGroup("addSub",i)}}},[e._v("\n                                添加子组\n                            ")]),e._v(" "),t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_user"},expression:"{\n                                    id: $route.name,\n                                    type: 'SysGroup_user'\n                                }"}],attrs:{size:"small",text:"",title:"primary"},on:{click:function(t){return t.stopPropagation(),e.personnelManage(n)}}},[e._v("\n                                人员管理\n                            ")]),e._v(" "),t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_role"},expression:"{\n                                    id: $route.name,\n                                    type: 'SysGroup_role'\n                                }"}],attrs:{size:"small",text:"",title:"primary"},on:{click:function(t){return t.stopPropagation(),e.roleManage(n)}}},[e._v("\n                                角色管理\n                            ")]),e._v(" "),t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_edit"},expression:"{\n                                    id: $route.name,\n                                    type: 'SysGroup_edit'\n                                }"}],attrs:{size:"small",text:"",title:"primary"},on:{click:function(t){return t.stopPropagation(),e.operateGroup("edit",n)}}},[e._v("\n                                编辑\n                            ")]),e._v(" "),t("bk-button",{directives:[{name:"permission",rawName:"v-permission",value:{id:e.$route.name,type:"SysGroup_delete"},expression:"{\n                                    id: $route.name,\n                                    type: 'SysGroup_delete'\n                                }"}],attrs:{size:"small",text:"",title:"primary"},on:{click:function(t){return t.stopPropagation(),e.deleteNode(n)}}},[e._v("\n                                删除\n                            ")])],1)])])}}])})],1)]),e._v(" "),t("operate-group",{ref:"operateGroup",on:{refreshList:e.refreshList}}),e._v(" "),t("auth-white-list",{ref:"authWhiteList",attrs:{"only-choose-user":!0,title:"人员管理",caller:"groupManage"},on:{confirm:e.getGroups}}),e._v(" "),t("role-manage",{ref:"roleManage",attrs:{title:"角色管理"}})],1)}),[],!1,null,"8a5e76d0",null);t.default=O.exports}}]);